<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Marin Tag Tests</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.0.0-alpha/css/bootstrap.css">

</head>

<body>
  <div class="controls">

    <!-- Manual Light Controls -->
    <button id="generate_click_control" class="btn btn-warning">Page Reload</button>
    <button id="generate_click_callback" class="btn btn-warning">Generate Click Callback</button>
    <button id="stop_light_control" class="btn btn-danger">Order Test 1</button>
    <button id="case_order_id_example" class="btn btn-success">Order Test 2</button>
    <button id="info_light_control" class="btn btn-info">TBD</button>

  <!-- Automatic Light Controls -->
  <!-- <button id="stop_control" class="btn btn-danger">Stop</button>
  <button id="go_control" class="btn btn-success">Go</button> -->

  </div>

<script type='text/javascript'>
    //You can put them in blocks like this (just like <style> tags)...

    var clickButton = document.getElementById('generate_click_control');
    console.log('Generate Click: Test action 1 for s5OV7lY0f');
    clickButton.addEventListener('click',function() {
    insertParam('mkwid', 's5OV7lY0f');
    });

    var test1Button = document.getElementById('stop_light_control');
    console.log('Order Test 1 : Numerical Order ID Test');
    test1Button.addEventListener('click',function() {
    marinConv();
    });



    var Test2Button = document.getElementById('case_order_id_example');
    console.log('Order Test 2 : Numbers + Mixed Case Order ID Test');
    Test2Button.addEventListener('click',function() {
    marinConvMixedCase();
    });


   function marinConv() {
     var track = new Image();
      track.src="https://tracker.marinsm.com/tp?act=2&cid=62571g0b12611868&currency=&trans=UTM:I|" + myFunction() + "|order|product|category||";
   }

   function myFunction() {
    var x = Math.floor((Math.random() * 10000000) + 1);
    return x;
}

function marinConvMixedCase() {
  var track = new Image();
   track.src="https://tracker.marinsm.com/tp?act=2&cid=62571g0b12611868&currency=&trans=UTM:I|" + myFunction() + "aA|order|product|category|50.21|";
}

function insertParam(key, value)
{
  key = encodeURI(key); value = encodeURI(value);

  var kvp = document.location.search.substr(1).split('&');

  var i=kvp.length; var x; while(i--)
  {
      x = kvp[i].split('=');

      if (x[0]==key)
      {
          x[1] = value;
          kvp[i] = x.join('=');
          break;
      }
  }

  if(i<0) {kvp[kvp.length] = [key,value].join('=');}

  //this will reload the page, it's likely better to store this until finished
  document.location.search = kvp.join('&');
}

  </script>

  <!-- BEGIN: Marin Software Tracking Script (Landing Page) -->
  <script type='text/javascript'>
  var _mTrack = _mTrack || [];
  _mTrack.push(['trackPage']);

  (function() {
  var mClientId = '24l339123';
  var mProto = (('https:' == document.location.protocol) ? 'https://' : 'http://');
  var mHost = 'tracker.marinsm.com';

  var mt = document.createElement('script'); mt.type = 'text/javascript'; mt.async = true; mt.src = mProto + mHost + '/tracker/async/' + mClientId + '.js';
  var fscr = document.getElementsByTagName('script')[0]; fscr.parentNode.insertBefore(mt, fscr);
  })();
  </script>
  <noscript>
  <img width="1" height="1" src="https://tracker.marinsm.com/tp?act=1&cid=24l339123&script=no" />
  </noscript>
  <!-- END: Copyright Marin Software -->


  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <script src="./js/main.js"></script>
</body>

</html>
