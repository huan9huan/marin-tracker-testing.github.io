<html>
<header>
	<script type="text/javascript">
		var _mTrack = _mTrack || [];
		_mTrack.push(['trackPage']);

		(function() {
			var mClientId = '2oez16457';
			var mProto = ('https:' == document.location.protocol ? 'https://' : 'http://');
			var mHost = 'tracker.marinsm.com';
			var mt = document.createElement('script'); mt.type = 'text/javascript'; mt.async = true; mt.src = mProto + mHost + '/tracker/async/' + mClientId + '.js';
			var fscr = document.getElementsByTagName('script')[0]; fscr.parentNode.insertBefore(mt, fscr);
		})();


	</script>

</header>
<body>
	We are trying something <br />
	<script type="text/javascript">
		function clickMarin()
		{
			var selectedProvider = [];
			var counter = 0;

			selectedProvider[0] = 'CEP';
			selectedProvider[1] = 'LMN';

			var selectedProviderPrice = new Array();
			selectedProviderPrice['CEP']   = '0.40';
			selectedProviderPrice['ECOTO'] = '0.35';
			selectedProviderPrice['LMN']   = '0.35';
			selectedProviderPrice['PARPA'] = '0.10';
			selectedProviderPrice['PIAVA'] = '0.40';
			selectedProviderPrice['PROMO'] = '0.10';
			selectedProviderPrice['SKIHO'] = '0.10';
			selectedProviderPrice['TOC']   = '0.35';
			selectedProviderPrice['HAVAS'] = '0.35';

			var orderIdRd = Math.floor(Math.random()*10000);
			var orderIdTs = Math.floor(Math.random()*100);
			var orderId = orderIdRd + orderIdTs;
			var totalRevenue = 0;

			var transactionObject = 	{	orderId : orderId,
								total : 0,
								currency : 'EUR',
								items : []
							}

			// create link
			for (var i = 0; i < selectedProvider.length; i++) {

				var providerName = selectedProvider[i];
				var total = selectedProviderPrice[providerName];
				var convType = providerName + 'Marin';
				var totalRevenue = totalRevenue + parseFloat(total);

				var item = 	{	convType : convType,
							orderId : orderId,
							product : '',
							price : total,
							category : '',
							quantity : ''
						};

				transactionObject.items.push(item);
			}

			// We add the total revenue to the object
			transactionObject.total = totalRevenue;

			var _marinTransaction = {	currency : 'EUR'};
			window._mTrack = [];
			window._mTrack.push(['addTrans', transactionObject]);
			window._mTrack.push(['processOrders']);

			var mClientId = '2oez16457';
			var mProto = ('https:' == document.location.protocol ? 'https://' : 'http://');
			var mHost = 'tracker.marinsm.com';
			var mt = document.createElement('script'); mt.type = 'text/javascript'; mt.async = true; mt.src = mProto + mHost + '/tracker/async/' + mClientId + '.js';
			var fscr = document.getElementsByTagName('script')[0]; fscr.parentNode.insertBefore(mt, fscr);
		}
	</script>
	<a href=# onclick="clickMarin()">TEST</a>
</body>
</html>
